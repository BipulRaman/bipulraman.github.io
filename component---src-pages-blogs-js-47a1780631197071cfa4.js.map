{"version":3,"sources":["webpack://bipul-raman/./src/pages/blogs.js"],"names":["BlogsPage","console","useState","skipCount","setSkipCount","blogs","setBlogs","BlogGetAll","response","error","offset","setOffset","useEffect","window","document","updatedCount","y","updatedBlogs","Array","x","Title","BlogsPageMetadata","Description","key","index","blog"],"mappings":"qOAQe,SAASA,IACtBC,qBADkC,OAEAC,cAFA,GAE3BC,EAF2B,KAEhBC,EAFgB,QAGQF,cAHR,oBAIRA,cAJQ,OAI3BG,EAJ2B,KAIpBC,EAJoB,MAKlCC,iBACU,iBACJ,IAAIC,GACF,OAAGH,GACDC,QAJVC,OAQW,SAAAE,GACLR,kBAd4B,OAiBNC,cAjBM,GAiB3BQ,EAjB2B,KAiBnBC,EAjBmB,KAoDlC,OAjCAC,gBAAU,WACR,oBAAWC,SACTA,gBAAkB,WAIhB,GAHAF,EAAUE,OAAVF,aACAV,YAAY,UAAYY,mBAAqBA,OAA7CZ,UACAA,YAAY,SAAWa,cAAvBb,cACKY,mBAAqBA,OAArBA,QAAD,KAAgDC,cAApD,aAAgF,CAC9Eb,gDACA,IAAIc,EAAeZ,EAAnB,EACAF,YAAY,gBAAZA,IACAM,iBACQ,YACJ,YAAIC,GACF,OAAGH,EAAe,CAChB,IAEIW,EAFJ,GACQC,OAAoBC,WAA5B,IACQC,OAASD,WAAjB,IACAjB,eACAK,KACAF,SATRG,OAaS,SAAAE,GACLR,uBAKT,CA7BHW,IA+BAX,eAGE,yBACE,qBACEmB,MAAOC,WACPC,YAAaD,mBAEbhB,SACA,oBADAA,MAEAA,EAAA,KAAU,cACR,OACE,gBAAC,WAAD,CAAgBkB,IAAKC,GACnB,qBAAUC,KAAMA","file":"component---src-pages-blogs-js-47a1780631197071cfa4.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Layout from '../layout/Layout';\nimport ShowBlog from '../components/ShowBlog';\nimport Metadata from '../components/Metadata';\nimport { BlogsPageMetadata } from '../configs/PageMetadata';\nimport { BlogGetAll } from \"../services/BlogService\";\nimport BlogSkeleton from '../components/BlogSkeleton';\n\nexport default function BlogsPage() {\n  console.log('Blogs');\n  const [skipCount, setSkipCount] = useState(0);\n  const [compareHeight, setCompareHeight] = useState(1200);\n  const [blogs, setBlogs] = useState(null);\n  BlogGetAll(skipCount)\n      .then((response) => {\n        if (response !== undefined) {\n          if(blogs === null){\n            setBlogs(response);\n          }         \n        }\n      })\n      .catch(error => {\n        console.log(error);\n      });\n\n  const [offset, setOffset] = useState(0)\n\n  useEffect(() => {\n    if (typeof window !== `undefined`) {\n      window.onscroll = () => {\n        setOffset(window.pageYOffset);\n        console.log('LHS : ' + (window.innerHeight + window.scrollY));\n        console.log('RHS : ' + document.body.offsetHeight);\n        if ((window.innerHeight + window.scrollY + 1000) >= document.body.offsetHeight) {\n          console.log(\"you're at the bottom of the page\");\n          var updatedCount = skipCount + 5;          \n          console.log('Skip Count : ' + updatedCount);\n          BlogGetAll(updatedCount)\n            .then((response) => {\n              if (response !== undefined) {\n                if(blogs !== null){\n                  var updatedBlogs = [];\n                  var x = updatedBlogs.concat(Array.from(blogs));\n                  var y = x.concat(Array.from(response));\n                  console.log(y);\n                  setBlogs(y);\n                  setSkipCount(updatedCount);\n                }              \n              }\n            })\n            .catch(error => {\n              console.log(error);\n            });\n       }\n      }\n    }\n  }, [offset])\n\n  console.log(offset)\n\n  return (\n    <Layout>\n      <Metadata\n        Title={BlogsPageMetadata.Title}\n        Description={BlogsPageMetadata.Description}\n      />\n      { blogs === null ?\n        <BlogSkeleton /> :\n        blogs.map(function (blog, index) {\n          return (\n            <React.Fragment key={index}>\n              <ShowBlog blog={blog} />\n            </React.Fragment>\n          )\n        })\n      }      \n    </Layout>\n  );\n}"],"sourceRoot":""}